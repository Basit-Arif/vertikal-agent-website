{% extends "base.html" %}
{% block content %}
{% set latest_post = stats.get('last_post') %}
<section class="min-h-[80vh] bg-slate-100/80 py-16">
  <div class="max-w-6xl px-6 mx-auto space-y-10">
    <header class="rounded-3xl bg-gradient-to-br from-blue-600 via-blue-500 to-teal-400 p-10 text-white shadow-xl">
      <div class="flex flex-col gap-6 md:flex-row md:items-center md:justify-between">
        <div>
          <p class="text-xs font-semibold uppercase tracking-[0.4em] text-white/70">Vertikal Admin</p>
          <h1 class="mt-4 text-3xl font-semibold">Welcome back, {{ admin.name.split()[0] if admin and admin.name else 'Creator' }}</h1>
          <p class="mt-2 max-w-2xl text-sm text-white/80">
            Stage new ideas, update live stories, and manage the team from one place. Everything you publish shapes how Vertikal shows up for operators.
          </p>
        </div>
        <div class="rounded-3xl bg-white/15 px-6 py-4 text-sm font-medium text-white shadow-lg shadow-black/20">
          <div class="flex flex-col text-right">
            <span class="text-xs uppercase tracking-[0.3em] text-white/70">Role</span>
            <span class="mt-1 text-lg font-semibold">{{ admin.role.title() if admin and admin.role else 'Author' }}</span>
          </div>
        </div>
      </div>
    </header>

    <div class="grid gap-6 md:grid-cols-3">
      <div class="rounded-3xl border border-slate-200 bg-white p-6 shadow-sm">
        <p class="text-xs font-semibold uppercase tracking-[0.2em] text-slate-400">Published</p>
        <p class="mt-3 text-3xl font-semibold text-slate-900">{{ stats.published_posts }}</p>
        <p class="mt-1 text-xs text-slate-500">Stories live on vertikalagent.com</p>
      </div>
      <div class="rounded-3xl border border-slate-200 bg-white p-6 shadow-sm">
        <p class="text-xs font-semibold uppercase tracking-[0.2em] text-slate-400">Total Posts</p>
        <p class="mt-3 text-3xl font-semibold text-slate-900">{{ stats.total_posts }}</p>
        <p class="mt-1 text-xs text-slate-500">All stories created</p>
      </div>
      <div class="rounded-3xl border border-slate-200 bg-white p-6 shadow-sm">
        <p class="text-xs font-semibold uppercase tracking-[0.2em] text-slate-400">Team Members</p>
        <p class="mt-3 text-3xl font-semibold text-slate-900">{{ stats.total_users }}</p>
        <p class="mt-1 text-xs text-slate-500">Authors with access</p>
      </div>
    </div>

    <div class="grid gap-8 md:grid-cols-3">
      <section class="md:col-span-2 rounded-3xl border border-slate-200 bg-white p-8 shadow-sm">
        <h2 class="text-xl font-semibold text-slate-900">Publishing actions</h2>
        <p class="mt-2 text-sm text-slate-500">Jump right into what matters most today.</p>
        <div class="mt-8 grid gap-4 sm:grid-cols-2">
          <a href="{{ url_for('admin.add_blog') }}" class="group rounded-2xl border border-blue-500 bg-blue-500 px-6 py-5 text-white transition hover:bg-blue-600 hover:shadow-lg hover:shadow-blue-200">
            <div class="flex flex-col gap-2">
              <span class="text-sm font-semibold uppercase tracking-[0.2em] text-white/80">Create</span>
              <span class="text-lg font-semibold">Draft a new story</span>
              <span class="text-sm text-white/70">Open the writer studio and start publishing.</span>
            </div>
          </a>
          <a href="{{ url_for('admin.manage_blogs') }}" class="group rounded-2xl border border-slate-200 px-6 py-5 text-slate-900 transition hover:border-blue-400 hover:shadow-lg hover:shadow-blue-100">
            <div class="flex flex-col gap-2">
              <span class="text-sm font-semibold uppercase tracking-[0.2em] text-slate-400">Update</span>
              <span class="text-lg font-semibold">Manage blog posts</span>
              <span class="text-sm text-slate-500">Review, edit, or unpublish live stories.</span>
            </div>
          </a>
          <a href="{{ url_for('admin.blog_detail', slug=latest_post.slug) if latest_post else url_for('admin.manage_blogs') }}" class="group rounded-2xl border border-slate-200 px-6 py-5 text-slate-900 transition hover:border-blue-400 hover:shadow-lg hover:shadow-blue-100">
            <div class="flex flex-col gap-2">
              <span class="text-sm font-semibold uppercase tracking-[0.2em] text-slate-400">Review</span>
              <span class="text-lg font-semibold">Latest story</span>
              <span class="text-sm text-slate-500">
                {{ latest_post.title if latest_post else 'See all posts' }}
              </span>
            </div>
          </a>
          <a href="{{ url_for('admin.create_user') }}" class="group rounded-2xl border border-slate-200 px-6 py-5 text-slate-900 transition hover:border-blue-400 hover:shadow-lg hover:shadow-blue-100">
            <div class="flex flex-col gap-2">
              <span class="text-sm font-semibold uppercase tracking-[0.2em] text-slate-400">Collaborate</span>
              <span class="text-lg font-semibold">Invite a teammate</span>
              <span class="text-sm text-slate-500">Add authors, editors, or fellow admins.</span>
            </div>
          </a>
          <a href="{{ url_for('admin.manage_users') }}" class="group rounded-2xl border border-slate-200 px-6 py-5 text-slate-900 transition hover:border-blue-400 hover:shadow-lg hover:shadow-blue-100">
            <div class="flex flex-col gap-2">
              <span class="text-sm font-semibold uppercase tracking-[0.2em] text-slate-400">Access</span>
              <span class="text-lg font-semibold">Manage existing users</span>
              <span class="text-sm text-slate-500">Update roles, emails, and passwords.</span>
            </div>
          </a>
          <a href="{{ url_for('admin.visitor_logs') }}" class="group rounded-2xl border border-slate-200 px-6 py-5 text-slate-900 transition hover:border-blue-400 hover:shadow-lg hover:shadow-blue-100">
            <div class="flex flex-col gap-2">
              <span class="text-sm font-semibold uppercase tracking-[0.2em] text-slate-400">Monitor</span>
              <span class="text-lg font-semibold">View visitor analytics</span>
              <span class="text-sm text-slate-500">See where traffic is coming from right now.</span>
            </div>
          </a>
          <a href="{{ url_for('admin.lead_list') }}" class="group rounded-2xl border border-slate-200 px-6 py-5 text-slate-900 transition hover:border-blue-400 hover:shadow-lg hover:shadow-blue-100">
            <div class="flex flex-col gap-2">
              <span class="text-sm font-semibold uppercase tracking-[0.2em] text-slate-400">Engage</span>
              <span class="text-lg font-semibold">Review inbound leads</span>
              <span class="text-sm text-slate-500">Follow up on demo requests and contact forms.</span>
            </div>
          </a>
          <a href="{{ url_for('admin.message_list') }}" class="group rounded-2xl border border-slate-200 px-6 py-5 text-slate-900 transition hover:border-blue-400 hover:shadow-lg hover:shadow-blue-100">
            <div class="flex flex-col gap-2">
              <span class="text-sm font-semibold uppercase tracking-[0.2em] text-slate-400">Inbox</span>
              <span class="text-lg font-semibold">Chatbot conversations</span>
              <span class="text-sm text-slate-500">Scan the latest inbound and outbound messages.</span>
            </div>
          </a>
        </div>
      </section>
      <aside class="rounded-3xl border border-slate-200 bg-white p-8 shadow-sm">
        <h3 class="text-lg font-semibold text-slate-900">Quick notes</h3>
        <ul class="mt-6 space-y-4 text-sm text-slate-500">
          <li class="flex items-start gap-3">
            <span class="mt-1 h-2 w-2 rounded-full bg-blue-500"></span>
            Schedule a cadence: publish at least one story weekly to stay top-of-mind.
          </li>
          <li class="flex items-start gap-3">
            <span class="mt-1 h-2 w-2 rounded-full bg-blue-500"></span>
            Use tags wisely so readers can filter by topics they care about most.
          </li>
          <li class="flex items-start gap-3">
            <span class="mt-1 h-2 w-2 rounded-full bg-blue-500"></span>
            Drop in campaign UTM links inside stories to track conversions.
          </li>
        </ul>
        <a href="{{ url_for('admin.logout') }}" class="mt-6 inline-flex items-center justify-center rounded-full border border-slate-200 px-5 py-2 text-xs font-semibold text-slate-500 transition hover:border-red-400 hover:text-red-500">
          Sign out
        </a>
      </aside>
    </div>
  </div>
</section>
{% endblock %}
